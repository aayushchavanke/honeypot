<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Apex Workspace | Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f4f6f8; font-family: 'Segoe UI', sans-serif; }
        .sidebar { width: 250px; background: #2c3e50; color: white; min-height: 100vh; }
        .nav-link { color: #bdc3c7; cursor: pointer; }
        .nav-link.active { background: #34495e; color: white; border-left: 4px solid #3498db; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
    <script>
        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
    </script>
</head>
<body class="d-flex">
    <div class="sidebar p-3">
        <h4 class="mb-4"><i class="fas fa-layer-group"></i> Apex Corp</h4>
        <div class="fw-bold mb-3">{{ user }}</div>
        {% if fake_mode %}<div class="alert alert-danger small p-1 text-center">SESSION MONITORED</div>{% endif %}
        <ul class="nav flex-column">
            <li class="nav-item"><a onclick="showTab('inbox')" class="nav-link active"><i class="fas fa-inbox me-2"></i> Inbox</a></li>
            <li class="nav-item"><a onclick="showTab('files')" class="nav-link"><i class="fas fa-folder me-2"></i> Files</a></li>
            <li class="nav-item"><a onclick="showTab('staff')" class="nav-link"><i class="fas fa-users me-2"></i> Directory</a></li>
        </ul>
        <div class="mt-5"><a href="/" class="btn btn-danger w-100">Sign Out</a></div>
    </div>
    <div class="flex-grow-1 p-4">
        
        <div id="inbox" class="tab-content active">
            <h3>Inbox</h3>
            <table class="table table-hover bg-white shadow-sm">
                <thead><tr><th>Sender</th><th>Subject</th><th>Status</th><th>Date</th></tr></thead>
                <tbody>
                    {% for e in data.emails %}
                    <tr><td class="fw-bold">{{ e.sender }}</td><td>{{ e.subject }}</td><td><span class="badge bg-secondary">{{ e.status }}</span></td><td class="small">{{ e.date }}</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="files" class="tab-content">
            <h3>Documents</h3>
            <div class="row g-3">
                {% for f in data.files %}
                <div class="col-md-4"><div class="card shadow-sm"><div class="card-body"><h5>{{ f.name }}</h5><p class="small text-muted">{{ f.type }} | {{ f.size }}</p></div></div></div>
                {% endfor %}
            </div>
        </div>

        <div id="staff" class="tab-content">
            <h3>Directory</h3>
            <table class="table bg-white shadow-sm">
                <thead><tr><th>Name</th><th>Role</th><th>Email</th><th>Status</th></tr></thead>
                <tbody>
                    {% for s in data.staff %}
                    <tr><td>{{ s.name }}</td><td>{{ s.role }}</td><td>{{ s.email }}</td><td>{{ s.status }}</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>